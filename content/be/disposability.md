## IX. Дзіспоўзэбіліці (Disposability)
### Павялiчце трываласць з дапамагай хуткага запуску і карэктнага завяршэння працы

**Дванаццаці-фактарныя працэсы дадаткаў з'яўляюцца *дзіспоўзэбл*, гэта значыць іх можна запусціць або спыніць у любы момант.** Гэта спрыяе хуткаму эластычнаму маштабаванню, хуткаму разгортванню змяненняў [кода](./codebase) або [канфігурацыі](./config), а таксама надзейнага разгортвання версіі для прадакшэна.

Працэсы павінны імкнуцца да **мінімізацыі часу запуску**. У ідэале працэс займае некалькі секунд з моманту пачатку выканання каманды запуску да таго часу, пакуль працэс не будзе гатовы да прыёму запытаў або заданняў. Кароткі час запуску забяспечвае вялікую гнуткасць для працэса [рэлізу](./build-release-run) і маштабавання; і гэта спрыяе трываласці, таму што мэнэджэр працэсаў можа больш лёгка перамяшчаць працэсы на новыя фізічныя машыны, калі гэта неабходна.

Працэсы **завяршаюць працу як запланавана, калі яны атрымліваюць сігнал [SIGTERM](http://en.wikipedia.org/wiki/SIGTERM)** ад мэнэджэра працэсаў. Для вэб-працэсу завяршэнне працы як патрабуецца дасягаецца шляхам спынення праслухоўвання службовага порта (тым самым адмаўляючыся ад любых новых запытаў), дазваляючы ўсім актыўным запытам завяршыцца, а затым выйсці. У гэтай мадэлі маецца на ўвазе, што HTTP-запыты з'яўляюцца кароткімі (не больш за некалькі секунд), або ў выпадку працяглага апытання кліент павінен лёгка паспрабаваць аднавіць сувязь, калі злучэнне страчана.

Для працоўнага працэсу гладкае завяршэнне працы дасягаецца шляхам вяртання актыўнага заданні ў працоўную чаргу. Напрыклад, на [RabbitMQ](http://www.rabbitmq.com/) апрацоўшчык задання можа адправіць [`NACK`](http://www.rabbitmq.com/amqp-0-9-1-quickref.html#basic.nack); на Beanstalkd](https://beanstalkd.github.io) заданне вяртаецца ў чаргу аўтаматычна кожны раз, калі апрацоўшчык задання адключаецца. Сістэмы, заснаваныя на блакаванні, такія як [адкладзенае заданне](https://github.com/collectiveidea/delayed_job#readme), павінны быць упэўненыя ў тым, што іх блакаванне здымаецца з запісу задання. У гэтай мадэлі маецца на ўвазе, што ўсе заданні з'яўляюцца [рэентерабельнымі (reentrant)](http://en.wikipedia.org/wiki/Reentrant_%28subroutine%29), што звычайна дасягаецца шляхам абёртвання вынікаў у транзакцыю або надання аперацыі [ідэмпатэнтнасці (idempotent)](http://en.wikipedia.org/wiki/Idempotence).

Працэсы таксама павінны быць **устойлівыя да раптоўнай "смерці"**, у выпадку збою абсталявання, на якім дадатак развернуты. Хоць гэта значна менш распаўсюджаная з'ява, чым запланаванае завяршэнне працы з `SIGTERM`, яно ўсё ж можа адбыцца. Рэкамендуемым падыходам з'яўляецца выкарыстанне надзейнай чаргі ў бэкэндзе, такога як Beanstalkd, які вяртае заданні ў чаргу, калі кліенты адключаюцца або мінае час чакання. У любым выпадку, дванаццаці-фактарны дадатак спраектаваны так, каб спраўляцца з нечаканымі, аварыйнымі завяршэннямі. [Дызайн толькі для аварыйных сітуацый (Crash-only design)](http://lwn.net/Articles/191059/) прыводзіць гэтую канцэпцыю да [яе лагічнага завяршэння(logical conclusion)](http://docs.couchdb.org/en/latest/intro/overview.html).
