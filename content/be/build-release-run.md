## V. Зборка, рэліз, запуску (Build, release, run)
### Строга падзяляйце этапы зборкі і запуску

[Кодавая база (codebase)](./codebase) пераўтворыцца ў разгортванне(deploy) (не з'яўляецца распрацоўкай (non-development)) праз тры этапы:

* *Этап зборкі (build stage)* гэта пераўтварэнне, якое пераўтворае кода ў рэпазіторые ў выкана пакет, вядомы як *зборка (build)*. Выкарыстоўваючы версію кода ў каміце (commit), які абазначаны ў працэсам разгортвання, этап зборкі здабывае [залежнасці (dependencies)](./dependencies) пастаўшчыкоў і кампілюе бінарныя(binaries) файлы і актывы (assets).
* *Этап рэлізу (release stage)* Этап рэлізу бярэ зборку, створаную этапам зборкі, і аб'ядноўвае яе з запатрабаванай [канфігурацыяй (config)](./config) разгортвання. Атрыманы *рэліз* змяшчае зборку разам з канфігурацыяй і гатовы да неадкладнага выканання ў асяроддзі вытворчасці.
* *Этап запуску* (таксама вядомы як "runtime") запускае дадатак ў асяроддзі вытворчасці, запускаючы некаторы набор [працэсаў (processes)](./processes) дадатака для абранага рэлізу.

![Code becomes a build, which is combined with config to create a release.](/images/release.png)

**Дадатак з дванаццаццю фактарамі выкарыстоўвае строгае падзел паміж этапамі зборкі, рэлізу і выканання.** Напрыклад, немагчыма ўнесці змены ў код падчас выканання, так як няма ніякага спосабу распаўсюдзіць гэтыя змены назад на стадыю зборкі.

Сродкі разгортвання звычайна прапануюць сродкі кіравання рэлізамі, у першую чаргу магчымасць адкату да папярэдняга рэлізу. Напрыклад, сродак разгортвання [Capistrano](https://github.com/capistrano/capistrano/wiki) захоўвае рэлізы ў падкаталогу `releases`, дзе актыўны рэліз з'яўляецца сімвалічнай спасылкай на актыўеы каталог release. Каманда `адкату (rollback)` ад Capistrano робіць лёгкім хутку адкат да папярэдняга рэлізу.

Кожны рэліз заўсёды павінен мець унікальны ідэнтыфікатар рэлізу, напрыклад часовую пазнаку рэлізу (напрыклад, `2011-04-06-20:32:17`) або аўтапавялічываюшчы(incrementing) нумар (напрыклад, `v100`). Рэлізы - гэта кніга, у якую можна рабіць запісы ў канец, і рэліз не можа быць зменены пасля яго стварэння. Любое змяненне павінна стварыць новы рэліз.

Зборкі ініцыююцца распрацоўшчыкамі дадатка кожны раз, калі разгортваецца новы код. Выкананне ў этап запуску (runtime execution), наадварот, можа адбывацца аўтаматычна ў такіх выпадках, як перазагрузка сервера або аварыйны (crashed) працэс, які перазапускаецца дыспетчарам працэсаў. Таму этап запуску павінен быць абмежаваны як мага меншай колькасцю незалежных фактараў, так як праблемы, якія перашкаджаюць запуску дадатка, могуць прывесці да яго паломкі пасярод ночы, калі побач няма распрацоўшчыкаў. Этап зборкі можа быць больш складаным, так як памылкі заўсёды знаходзяцца на пярэднім плане для распрацоўніка, які кіруе разгортваннем.

