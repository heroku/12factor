## V. Зборка, рэліз, выкананне (Build, release, run)
### Строга падзяляйце этапы зборкі і выканання

[Кодавая база (codebase)](./codebase) пераўтворыцца ў разгортванне (не ўлічваючы разгортванне для распрацоўкі) праз тры этапы:

* *Этап зборкі (build stage)* гэта транфармацыя, якая ператворыць код з рэпазіторыя ў выканальны пакет, што завецца *зборка (build)*. Скарыстаючы версію кода ў вызначанным працэссам разгортвання каміце (commit), этап зборкі загружае пабочныя [залежнасці](./dependencies) і кампілюе бінарныя файлы і рэсурсы.
* *Этап рэлізу (release stage)* прымае зборку, створаную этапам зборкі, і аб'ядноўвае яе з бягучай [канфігурацыяй](./config) разгортвання. Атрыманы *рэліз* змяшчае зборку разам з канфігурацыяй і гатовы да неадкладнага запуску ў асяроддзі выканання.
* *Этап выканання* (таксама вядомы як "runtime") запускае дадатак ў асяроддзі выканання шляхам запуску некаторага набору [працэсаў](./processes) дадатаку для пэўнага рэлізу.

![Код робіцца зборкай, якая яднаецца з канфігурацыяй для стварэння рэлізу](/images/release.png)

**Дадатак, пабудаваны па метадалогіі дванаццацці фактараў, выкарыстоўвае строгі падзел паміж этапамі зборкі, рэлізу і выканання.** Напрыклад, немагчыма зрабіць змены кода падчас выканання, так як няма ніякага спосабу распаўсюдзіць гэтыя змены назад на этап зборкі.

Сродкі разгортвання уяўляюць сабою сродкі кіравання рэлізамі, у першую чаргу, магчымасць адкату да папярэдняга рэлізу. Напрыклад, сродак разгортвання [Capistrano](https://github.com/capistrano/capistrano/wiki) захоўвае рэлізы ў падкаталогу `releases`, дзе бягучы рэліз з'яўляецца сімвалічнай спасылкай на бягучы каталог release. Каманда адкату `rollback` ад Capistrano дае магчымасць хутка адкоціцца да папярэдняга рэлізу.

Кожны рэліз павінен мець унікальны ідэнтыфікатар рэлізу, напрыклад часовую пазнаку рэлізу (напрыклад, `2011-04-06-20:32:17`) або аўтаматычна пабольшаны нумар (напрыклад, `v100`). Рэлізы магчыма толькі дадаць і кожны рэліз немагчыма змяніць пасля яго стварэння. Любыя змены абавязаны ствараць новы рэліз.

Зборкі ініцыююцца распрацоўшчыкамі дадатку кожны раз, калі разгортваецца новы код. Запуск этапу выканання (runtime execution), наадварот, можа адбывацца аўтаматычна ў такіх выпадках, як перазагрузка сервера або аварыйны (crashed) працэс, які перазапускаецца дыспетчарам працэсаў. Такім чынам, этап выканання павінен быць  быць як мага больш тэхнічна простым, бо праблемы, якія могуць перашкодзіць запуску дадатку, могуць прывесці да яго паломкі ў сярэдзіне ночы, калі побач няма распрацоўшчыкаў. Этап зборкі можа быць складанейшым, бо магчымыя памылкі заўсёды бачны распрацоўшчыку, які запусціў разгортванне.

