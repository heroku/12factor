## VIII. Паралельнасць
### Маштабуйце з дапамогай мадэлі працэсу

Любая кампутарная праграма, аднойчы запушчаная, прадстаўлена адным ці некалькімі працэсамі. Вэб дадаткі прымаюць розныя формы выканання працэсаў. Напрыклад, працэсы PHP выконваюцца як працэсы, утвораныя ад Apache працэсу, якія запускаюцца па патрабаванні па меры неабходнасці па аб'ёме запыту. Працэсы Java выкарыстоўваюць супрацьлеглы падыход, калі JVM падае адзін масіўны працэс (uberprocess), які рэзервуе вялікі блок сістэмных рэсурсаў (працэсар і памяць) пры запуску, з паралелізмам, кіраваным ўнутрана праз патокі. У абодвух выпадках запушчаныя працэсы з'яўляюцца толькі мінімальна бачнымі для распрацоўшчыкаў дадатка.

![Scale is expressed as running processes, workload diversity is expressed as process types.](/images/process-types.png)

**У дванаццаці-фактарным дадатку працэсы - гэта першакласныя "грамадзяне" (first class citizen).** Працэсы у дадатак дванаццаці фактараў выкарыстоўваюць мадэль [працэсу Unix для выканання сэрвіс-дэманаў](https://adam.herokuapp.com/past/2011/5/9/applying_the_unix_process_model_to_web_apps/). Выкарыстоўваючы гэтую мадэль, распрацоўшчык можа сканструяваць свой дадатак для апрацоўкі розных працоўных нагрузак, прызначыўшы кожнаму тыпу працы пэўны *тып працэсу*. Напрыклад, HTTP - запыты могуць апрацоўвацца вэб-працэсам, а працяглыя фонавыя задачы - працоўным працэсам.

Гэта не выключае магчымасці апрацоўкі асобнымі працэсамі іх уласнага ўнутранага мультыплексавання з дапамогай патокаў ўнутры віртуальнай машыны часу выканання або асінхроннай / падзей мадэлі, знойдзенай у такіх інструментах, як [EventMachine](https://github.com/eventmachine/eventmachine), [Twisted](http://twistedmatrix.com/trac/) або [Node.js](http://nodejs.org/). Але асобная віртуальная машына можа толькі расці настолькі вялікім( вертыкальны маштаб), таму дадатак таксама павінен быць магчымым ахапіць некалькі працэсаў, запушчаных на некалькіх фізічных машынах.

Мадэль працэсу сапраўды патрэбны, калі прыходзіць час маштабавання. [Адсутнасць агульна ўжывальнага рэсурсу, гарызантальна падзяляная прырода дванаццаці-фактарных працэсаў дадаткаў](./processes) азначае, што даданне большай колькасці паралелізму з'яўляецца просты і надзейнай аперацыяй. Масіў тыпаў працэсаў і колькасць працэсаў кожнага тыпу вядома як *працэс фарміравання*.

Працэсы дванаццаці фактарнага дадатка [ніколі не павінны дэманізаваць](http://dustin.github.com/2010/02/28/running-processes.html) або пісаць PID-файлы. Замест гэтага спадзявацца на дыспетчар працэсаў аперацыйнай сістэмы (напрыклад, [systemd](https://www.freedesktop.org/wiki/Software/systemd/), размеркаваны менеджэр працэсаў на воблачнай платформе або інструмент як [Foreman](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html) ў распрацоўцы) для кіравання [выходнымі патокамі](./logs), рэагавання на аварыйныя працэсы і апрацоўкі ініцыяваных карыстальнікам перазапускаў і прыпынкаў.
