## VIII. Паралелізм
### Маштабуйце дадатак з дапамогай мадэлі працэсу

Любая кампутарная праграма, пасля запуску ўяўляе сабою адзін ці некалькі працоўных працэсаў. Вэб-дадаткі прымаюць розныя формы выканання працэсаў. Напрыклад, працэсы ў PHP выконваюцца як даччыныя працэсы Apache і запускаюцца па вымозе ў адпаведнасці з колькасцью запытаў. Працэсы ў Java выкарыстоўваюць супрацьлеглы падыход, калі JVM падае адзін маналітны працэс (uberprocess), які рэзервуе вялікі аб'ём сістэмных рэсурсаў працэсара і памяці пры запуску, і кіруе паралелізмам праз патокі. У абодвух выпадках запушчаныя працэсы з'яўляюцца мінімальна бачнымі для распрацоўшчыкаў дадатка.

![Маштабаванне адлюстроўваецца ў колькасці запушчаных працэсаў, адрозненне працоўнай нагрузкі - у тыпах працэсаў.](/images/process-types.png)

**У дванаццаці-фактарным дадатку працэсы з'яўляюцца сутнасцямі першага класа (first class citizen).** Працэсы дванаццаці-фактарнага дадатку ўзялі моцныя бакі з [працэсу Unix для выканання сэрвіс-дэманаў](https://adam.herokuapp.com/past/2011/5/9/applying_the_unix_process_model_to_web_apps/). З дапамогай гэтай мадэлі распрацоўшчык можа спраектаваць свой дадатак такім чынам, што для апрацоўкі рознай нагрузкі трэба прызначыць кожнаму тыпу працы свой  *тып працэсу*. Напрыклад, HTTP-запыты могуць апрацоўвацца вэб-працэсам, а працяглыя фонавыя задачы - працоўным працэсам.

Гэта не выключае магчымасці апрацоўкі асобнымі працэсамі іх уласнага ўнутранага мультыплексавання пры дапамозе патокаў выканання ўнутры віртуальнай машыны або асінхроннай/праз івэнты мадэлі, якія выкарыстоўваюцца у такіх інструментах, як [EventMachine](https://github.com/eventmachine/eventmachine), [Twisted](http://twistedmatrix.com/trac/) або [Node.js](http://nodejs.org/). Але кожная віртуальная машына можа вельмі хутка расці (толькі па вертыкалі), таму дадатак таксама павінен мець магчымасць быць запушчаным як некалькі працэсаў на розных фізічных машынах.

Мадэль, пабудаваная на працэсах, цалкам дэманструе свае перавагі, калі прыходзіць час маштабавання. [Адсутнасць супольных рэсурсаў, гарызантальны падзел працэсаў дванаццаці-фактарных дадаткаў](./processes) азначае, што даданне большай колькасці паралелізму з'яўляецца простай і надзейнай аперацыяй. Масіў працэсаў рознага тыпу і колькасць працэсаў кожнага тыпу вядома як *працэс фарміравання*.

Працэсы дванаццаці фактарнага дадатка [ніколі не павінны дэманізаваць](http://dustin.github.com/2010/02/28/running-processes.html) и запісваць PID-файлы. Замест гэтага яны павінны належыць дыспетчару працэсаў аперацыйнай сістэмы (напрыклад, [systemd](https://www.freedesktop.org/wiki/Software/systemd/), размеркаванаму менеджэру працэсаў на воблачнай платформе або інструменту [Foreman](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html) падчас распрацоўцкі) для кіравання [выходнымі патокамі](./logs), рэагавання на аварыйныя становішча і апрацоўкі ініцыяваных карыстальнікам перазапускаў і прыпынкаў.
