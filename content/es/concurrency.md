## VIII. Concurrencia
### Escalar horizontalmente mediante el modelo de procesos

Cualquier programa software, mientras esté en marcha, se representa mediante uno o más procesos. Las aplicaciones web pueden ejecutarse mediante distintos modelos de procesos. Por ejemplo, los procesos PHP se ejecutan como procesos hijos de Apache, que se inician bajo demanda según la cantidad de peticiones recibidas. Los procesos Java adoptan la estrategia opuesta, la JVM presta un "uberproceso" masivo que reserva inicialmente un gran bloque de recursos del sistema (CPU y memoria) y maneja la concurrencia internamente, mediante hilos. En ambos casos, los desarrolladores de la aplicación tienen una visibilidad mínima sobre los procesos que están en marcha.

![La escala se expresa como procesos en marcha, la diversidad de tareas se expresa como tipos de procesos.](/images/process-types.png)

**En una aplicación twelve-factor, los procesos son ciudadanos de primera clase.** Los procesos en una aplicación twelve-factor se inspiran en [el modelo de procesos de Unix para ejecutar demonios de servicio](http://adam.heroku.com/past/2011/5/9/applying_the_unix_process_model_to_web_apps/). En dicho modelo el desarrollador puede diseñar su aplicación para manejar diversas tareas asignando cada tipo de tarea a un *tipo de proceso*. Por ejemplo, las peticiones HTTP pueden ser manejadas por un proceso web, mientras tareas largas en el background pueden ser manejadas por otros procesos.

Esto no excluye que ciertos procesos individuales se multiplexen internamente, a través de hilos dentro de la máquina virtual, o el modelo asíncrono/basado en eventos que se encuentra en herramientas como [EventMachine](http://rubyeventmachine.com/), [Twisted](http://twistedmatrix.com/trac/), o [Node.js](http://nodejs.org/). Pero una sola máquina virtual puede crecer solo hasta cierto tamaño (escalar verticalmente), así que la aplicación también debe ser capaz de abarcar múltiples procesos que están en marcha en múltiples máquinas físicas.

El modelo de procesos destaca de verdad cuando llega la hora de escalar horizontalmente. La [característica de share-nothing, y el que los procesos de una aplicación twelve-factor sean divisibles horizontalmente](./processes) significa que agregar mas concurrencia es una operación simple y segura. El vector de tipos de procesos y la cantidad de procesos de cada tipo se llama la *formación de procesos*.

Los procesos de una aplicación twelve-factor [nunca deben daemonizarse](http://dustin.github.com/2010/02/28/running-processes.html) ni crear archivos PID. Lo mejor es que confíen en el gestor de procesos del sistema operativo (como [Upstart](http://upstart.ubuntu.com/), un gestor de procesos distribuidos en una plataforma en la nube, o una herramienta como [Foreman](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html) en desarrollo) para manejar el [flujo de datos](./logs), responder a procesos caídos, y manejar reinicios y paros controlados por el usuario.
