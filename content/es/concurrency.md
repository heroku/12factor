## VIII. Concurrencia
### Escalar horizontalmente via el modelo de procesos

Cualquier programa de computadoras, mientras esté en marcha, se representa a tráves de uno o más procesos. Los web apps adoptan una variedad de formas del proceso de ejecución. Por ejemplo, los procesos PHP se ejecutan como procesos hijos de Apache, que se inician a pedido según se necesite por la cantidad de peticiones. Los procesos Java adoptan la estrategia opuesta, en que el JVM presta un "uberproceso" masivo que reserva un gran bloque de recursos del sistema (CPU y memoria) en su inicio, con concurrencia manejada de manera interna via hilos. En ambos casos, los desarrolladores del app solo tienen el mínimo de visibilidad sobre el proceso(s) que está en marcha.

![La escala se expresa como procesos en marcha, diversidad de trabajo se expresa como tipos de procesos.](/images/process-types.png)

**En el app twelve-factor, los procesos son ciudadanos de primera clase.** Los procesos en el app twelve-factor son inspirados por [el modelo de procesos de unix para ejecutar daemons de servicio](http://adam.heroku.com/past/2011/5/9/applying_the_unix_process_model_to_web_apps/). Con aquel modelo, el desarrollador puede diseñar su app para manejar diverso trabajo a tráves de asignar cada tipo de trabajo a un *tipo de proceso*. Por ejemplo, las peticiones HTTP pueden ser manejadas por un proceso web, mientras tareas largas en el fondo pueden ser manejadas por procesos trabajadores.

Esto no excluye que ciertos procesos individuales manejen su propia multiplexión interna, a tráves de hilos dentro de la máquina virtual, o el modelo de asíncrono/eventos que se encuentra en herramientas como [EventMachine](http://rubyeventmachine.com/), [Twisted](http://twistedmatrix.com/trac/), o [Node.js](http://nodejs.org/). Pero una sola máquina virtual se puede crecer solo hasta cierto tamaño (escalar verticalmente), así que la aplicación también debe ser capaz de abarcar múltiples procesos que están en marcha en múltiples máquinas físicas.

El modelo de procesos realmente se destaca cuando sea tiempo de escalar horizontalmente. La [característica de share-nothing, y de ser divisible horizontalmente de los procesos del app twelve-factor](./processes) significa que agregar mas concurrencia es una operación simple y seguro. El vector de tipos de procesos y la cantidad de procesos de cada tipo se llama la *formación de procesos*.

Los procesos del app twelve-factor [nunca deben daemonizarse](http://dustin.github.com/2010/02/28/running-processes.html) ni crear archivos PID. Mejor, deben confiar en el gestor de procesos del sistema operativo (como [Upstart](http://upstart.ubuntu.com/), un gestor de procesos distribuidos en una plataforma en la nube, o una herramienta como [Foreman](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html) en desarrollo) para manejar los [flujos de eventos](./logs), responder a procesos caídos, y manejar reinicios y cierres iniciados por el usuario.
