## V. بناء، إصدار، تشغيل
### التفرقة بدقة بين مراحل البناء والتشغيل

[قاعدة الأكواد](./codebase) تتحول إلى إطلاقة (غير تطويرية) عبر ثلاث مراحل:
* * مرحلة البناء* هي مرحلة يتحول فيها مستودع الكود إلي حزمة قابلة للتنفيذ تسمي *بناء*. باستخدام اصدارة من الكود عند مساهمة محددة في عملية الإطلاق، فإن مرحلة البناء تستحضر [الإعتمادات](./dependencies) الخارجية وتقوم بترجمة وتجميع الأكواد والأصول.
* *مرحلة الإصدار* تأخذ البناء الناتج من المرحلة السابقة وتضمه مع [متغيرات ضبط](./config) الإطلاقة الحالية. *الإصدار* الناتج يحتوي كلاً من البناء والضبط وجاهز للتنفيذ مباشرة في بيئة التنفيذ.
* *مرحلة التشغيل* (أيضا تعرف ب "runtime") تقول بتشغيل التطبيق في بيئة التنفيذ، من خلال إطلاق مجموعة من [عمليات](./processes) التطبيق في إصدار معين

![الكود يصبح بناء، والذي يتم دمجه مع متغيرات الضبط ليصبح إصدارة](/images/release.png)

**تطبيق القواعد الإثني عشر يفرق بدقة بين مراحل البناء والإصدار والتشغيل**. فعلي سبيل المثال، من المستحيل تعديل الكود أثناء التنفيذ، حيث أنه من غير الممكن إعادة تخليق هذه التغييرات في مرحلة البناء

تقدم أدوات الإطلاق في معظم الأحيان أدوات لإدارة الإصدارات، ومن الجدير بالملاحظة قدرتها علي استرجاع إصدارة سابقة. فمثلاً، أداة [Capistrano](https://github.com/capistrano/capistrano/wiki) للإطلاق تخزن الإصدارات في مجلد فرعي بإسم `releases`، حيث يشير مؤشر الإصدار الحالي إلى مجلد الإصدار الحالي. الأمر `rollback` يسهل التراجع إلى إصدار سابق بشكل سريع 

يجب أن يكون لكل إصدار رقم هوية متفرد، مثل الطابع الزمني للإصدار (مثل: `2011-04-06-20:32:17`) أو رقم متزايد (مثل: `v100`). الإصدارات تكون مثل دفتر حسابات للإضافة فقط ولا يسمح بأي تغيير فيها بعد إنشائها، أي تغيير يستلزم بالضرورة إصدار جديد.

الأبنية "builds" تبدأ بواسطة مطوري التطبيق حيثما يتم إطلاق كود جديد. تنفيذ التشغيل -في المقابل- يمكن أن يحدث أوتوماتيكياً في حالة حدوث إعادة تشغيل للسيرفر مثلاً، أو إعادة تشغيل عملية بواسطة مدير العمليات في حالة تحطمها. وبناء عليه، فيجب أن يتم الحفاظ علي أن تكون الأجزاء المتحركة في عملية التشغيل أقل ما يمكن، حيث أن المشاكل التي قد تمنع التطبيق من التشغيل من الممكن أن تحدث في منتصف الليل وحيث لا يوجد آحد من المطورين لحل المشكلة. مرحلة البناء تكون معقدة أكثر، حيث الأخطاء ظاهرة على السطح للمطور الذي يقود عملية الإطلاق.

