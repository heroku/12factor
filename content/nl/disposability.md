## IX. Wegwerpbaarheid
### Maximaliseer robuustheid met snel opstarten en elegant afsluiten

**De 12-factor app's [processen](./processen) zijn *wegwerpbaar*, wat betekent dat ze kunnen worden gestart of gestopt op elk moment.** Dit vergemakkelijkt snel elastisch schalen, snel implementeren van [code](./codebase) of [config](./config) veranderingen, en robuustheid van productie deploys.

Processen moeten streven naar **minimale opstarttijd**. In het ideale geval heeft een proces een paar seconden nodig vanaf het moment dat het launch commando wordt uitgevoerd totdat het proces opgestart is en klaar om verzoeken of opdrachten te ontvangen. Een korte opstarttijd zorgt voor meer wendbaarheid voor het [release](./build-release-run) proces en het opschalen; en het bevordert de robuustheid, omdat het procesbeheerder processen gemakkelijker kan verplaatsen naar nieuwe fysieke machines wanneer dat gerechtvaardigd is.

Processen **sluiten elegant af wanneer ze een [SIGTERM](http://en.wikipedia.org/wiki/SIGTERM)** signaal ontvangen van de procesbeheerder. Voor een webproces wordt "graceful shutdown" bereikt door te stoppen met luisteren op de servicepoort (en daarbij nieuwe verzoeken te weigeren), alle lopende verzoeken te laten afwerken, en dan af te sluiten. Impliciet in dit model is dat HTTP-verzoeken kort zijn (niet meer dan een paar seconden), of in het geval van long polling, de cliënt moet probleemloos proberen opnieuw verbinding te maken wanneer de verbinding wordt verbroken.

Voor een worker proces, wordt graceful shutdown bereikt door de huidige job terug te sturen naar de work queue. Bijvoorbeeld, op [RabbitMQ](http://www.rabbitmq.com/) kan de worker een [`NACK`](http://www.rabbitmq.com/amqp-0-9-1-quickref.html#basic.nack) sturen; op [Beanstalkd](https://beanstalkd.github.io), wordt de taak automatisch teruggegeven aan de wachtrij wanneer een worker de verbinding verbreekt. Lock-gebaseerde systemen zoals [Delayed Job](https://github.com/collectiveidea/delayed_job#readme) moeten er zeker van zijn dat ze hun lock op het taakrecord vrijgeven. Impliciet in dit model is dat alle jobs [reentrant](http://en.wikipedia.org/wiki/Reentrant_%28subroutine%29) zijn, wat typisch wordt bereikt door de resultaten in een transactie te verpakken, of door de operatie [idempotent](http://en.wikipedia.org/wiki/Idempotence) te maken.

Processen moeten ook **robuust zijn tegen plotse dood**, in het geval van een storing in de onderliggende hardware. Hoewel dit veel minder vaak voorkomt dan een "graceful shutdown" met `SIGTERM`, kan het nog steeds gebeuren. Een aanbevolen aanpak is het gebruik van een robuust queueing backend, zoals Beanstalkd, dat jobs teruggeeft aan de queue wanneer clients de verbinding verbreken of time-out gaan. Hoe dan ook, een 12-factor app is ontworpen om onverwachte, niet-gracieuze beëindigingen aan te kunnen. [Crash-only ontwerp](http://lwn.net/Articles/191059/) brengt dit concept naar zijn [logische conclusie](http://docs.couchdb.org/en/latest/intro/overview.html).