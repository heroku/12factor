## IX. חד פעמיות
### מקסם את חוסן המערכת עם עלייה מהירה וכיבוי מבוקר

**[תהליכים](./processes) על פי מתודולוגיית שניים-עשר הגורמים הם *חד פעמיים*, כלומר, ניתן להתחיל אותם או לכבות אותו ללא התראה מוקדמת.** דבר זה מאפשר גדילה, פריסה מהירה של [הקוד](./codebase) או שינויים [בקונפיגורציה](./config) וחוסן של הגרסאות בפרודקשיין.

על תהליכים לשאוף **להקטין את זמן העלייה**. באופן אידיאלי, לוקח רק מספר שניות מרגע העלייה של התהליך עד שהוא מוכן לקבל בקשות. עלייה מהירה מאפשרת להטיב את תהליך [הפריסה](./build-release-run) והגדילה; עוזרת בחוסן המערכת מכיוון ומנהל התהליכים יכול בקלות להעביר את התהליכים למכונות חדשות כאשר זה נדרש.

על התהליכים **להיכבות בצורה מבוקרת כאשר הם מקבלים [SIGTERM](http://en.wikipedia.org/wiki/SIGTERM)** ממנהל התהליכים. עבור אפליקציית ווב, כיבוי מבוקר הוא הפסקת האזנה לפורט ועל כן לא יקבל בקשות חדשות, והמתנה לסיום הבקשות שעוד בתהליך. משתמע ממודל זה שבקשות ה-HTTP הינן קצרות (לא יותר מכמה שניות) או, במקרים אחרים, על הקליינט לנסות להתחבר שוב כאשר ההתחברות נכשלת.

עבור תהליך עבודה, כיבוי מבוקר משמעו החזרת העבודה לתור. למשל, ב-[RabbitMQ](http://www.rabbitmq.com/) התהליך יכול לשלוח בקשת [`NACK`](http://www.rabbitmq.com/amqp-0-9-1-quickref.html#basic.nack); ב-[Beanstalkd](https://beanstalkd.github.io) העבודה מוחזרת לתור באופן אוטומטי כאשר התהליך מתנתק. תהליכים אשר נועלים משאבים כמו [Delayed Job](https://github.com/collectiveidea/delayed_job#readme) צריכים לשחרר את המשאבים לפני הכיבוי. משטמע מכך שניתן [לחזור על כל תהליך](http://en.wikipedia.org/wiki/Reentrant_%28subroutine%29), ניתן להשיג זאת על ידי עטיפת התוצאות בטרנסקציה או על ידי כך שניתן להחיל את התהליך על המידע כמה פעמים ללא בעיה - [idempotent](http://en.wikipedia.org/wiki/Idempotence).

על התהליכים גם להיות **חסינים מפני מוות פתאומי**, במצב של קריסה חומרתית למשל. מצב זה הוא פחות תדיר מ-`SIGTERM`, אך עדיין יכול לקרות. גישה מומלצת היא שימוש בתור חסין כמו Beanstalkd, אשר מחזיר את ההודעה לתור כאשר התהליך מתנתק. בכל מקרה, אפליקציות אשר מממשות את מתודולוגיית שניים-עשר הגורמים בנויות להתמודד עם כיבויים בלתי צפויים. [עיצוב של קריסה](http://lwn.net/Articles/191059/) לוקח את הקונספט הזה [למסקנה הלוגית](http://docs.couchdb.org/en/latest/intro/overview.html).